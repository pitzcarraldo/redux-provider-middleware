{"version":3,"sources":["../src/providerMiddleware.js"],"names":[],"mappings":";;;qBACwB;AADxB,IAAI,YAAY,EAAZ;AACW,SAAS,kBAAT,GAA4C;oCAAb;;GAAa;;AACzD,SAAO,gBAA4B;QAAzB,yBAAyB;QAAf,yBAAe;;AACjC,gBAAY,YAAY,MAAZ,CAAmB,UAAC,aAAD,EAAgB,QAAhB,EAA6B;AAC1D,oBAAc,SAAS,IAAT,CAAd,GAA+B,SAAS,IAAT,CAAc,EAAE,kBAAF,EAAY,kBAAZ,EAAd,CAA/B,CAD0D;AAE1D,aAAO,aAAP,CAF0D;KAA7B,EAG5B,EAHS,CAAZ,CADiC;AAKjC,WAAO;aAAQ,kBAAU;AACvB,YAAI,OAAO,MAAP,KAAkB,UAAlB,EAA8B;AAChC,cAAM,WAAW,OAAO,SAAP,CAAX,CAD0B;AAEhC,cAAI,SAAS,IAAT,IAAiB,OAAO,SAAS,IAAT,KAAkB,UAAzB,EAAqC;AACxD,mBAAO,SACJ,IADI,CACC;qBAAkB,KAAK,cAAL;aAAlB,CADD,UAEE,iBAAS;AACd,oBAAM,KAAN,CADc;aAAT,CAFT,CADwD;WAA1D;AAOA,mBAAS,QAAT,CATgC;SAAlC;AAWA,eAAO,KAAK,MAAL,CAAP,CAZuB;OAAV;KAAR,CAL0B;GAA5B,CADkD;CAA5C","file":"providerMiddleware.js","sourcesContent":["let PROVIDERS = {};\nexport default function providerMiddleware(...willProvide) {\n  return ({ dispatch, getState }) => {\n    PROVIDERS = willProvide.reduce((prevProviders, provider) => {\n      prevProviders[provider.name] = provider.$get({ dispatch, getState });\n      return prevProviders;\n    }, {});\n    return next => action => {\n      if (typeof action === 'function') {\n        const provided = action(PROVIDERS);\n        if (provided.then && typeof provided.then === 'function') {\n          return provided\n            .then(providedAction => next(providedAction))\n            .catch(error => {\n              throw error;\n            });\n        }\n        action = provided;\n      }\n      return next(action);\n    };\n  };\n}\n"]}